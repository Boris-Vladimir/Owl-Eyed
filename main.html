{% extends "base.html" %}

{% macro config_item(config, depends="") -%}
    <tr class="settings-item additional-config {% if config['advanced'] %}advanced-setting{% endif %}"
            {% if config.get('reboot') and enable_reboot %}reboot="true"{% endif %}
            {% if config.get('required') %}required="true"{% endif %}
            {% if config.get('strip') %}strip="true"{% endif %}
            {% if config.get('depends') %}depends="{{' '.join(config['depends'])}}{% if depends %} {{depends}}{% endif %}"{% endif %}
            {% if config.get('min') is not none %}min="{{config['min']}}"{% endif %}
            {% if config.get('max') is not none %}max="{{config['max']}}"{% endif %}
            {% if config.get('floating') %}floating="true"{% endif %}
            {% if config.get('sign') %}sign="true"{% endif %}
            {% if config.get('snap') is not none %}snap="{{config['snap']}}"{% endif %}
            {% if config.get('ticks') %}ticks="{{config['ticks']}}"{% endif %}
            {% if config.get('ticksnum') is not none %}ticksnum="{{config['ticksnum']}}"{% endif %}
            {% if config.get('decimals') is not none %}decimals="{{config['decimals']}}"{% endif %}
            {% if config.get('unit') %}unit="{{config['unit']}}"{% endif %}
            {% if config.get('validate') %}validate="{{config['validate']}}"{% endif %}>
        {% if config['type'] == 'separator' %}
        <td colspan="100"><div class="settings-item-separator"></div></td>
        {% else %}
        <td class="settings-item-label"><span class="settings-item-label">{{config['label']}}</span></td>
        <td class="settings-item-value">
            {% if config['type'] == 'str' %}
                <input type="text" class="styled {{config['section']}} {% if config.get('camera') %}camera{% else %}main{% endif %}-config" id="{{config['name']}}Entry">
            {% elif config['type'] == 'pwd' %}
                <input type="password" class="styled {{config['section']}} {% if config.get('camera') %}camera{% else %}main{% endif %}-config" id="{{config['name']}}Entry">
            {% elif config['type'] == 'number' %}
                <input type="text" class="number styled {{config['section']}} {% if config.get('camera') %}camera{% else %}main{% endif %}-config" id="{{config['name']}}Entry">
            {% elif config['type'] == 'range' %}
                <input type="text" class="range styled {{config['section']}} {% if config.get('camera') %}camera{% else %}main{% endif %}-config" id="{{config['name']}}Slider">
            {% elif config['type'] == 'bool' %}
                <input type="checkbox" class="styled {{config['section']}} {% if config.get('camera') %}camera{% else %}main{% endif %}-config" id="{{config['name']}}Switch">
            {% elif config['type'] == 'choices' %}
                <select class="styled {{config['section']}} {% if config.get('camera') %}camera{% else %}main{% endif %}-config" id="{{config['name']}}Select">
                    {% for choice in config['choices'] %}
                    <option value="{{choice[0]}}">{{choice[1]}}</option>
                    {% endfor %}
                </select>
            {% elif config['type'] == 'html' %}
                <div class="html styled {{config['section']}} {% if config.get('camera') %}camera{% else %}main{% endif %}-config" id="{{config['name']}}Html"></div>
            {% endif %}
        </td>
        <td>{% if config.get('description') %}<span class="help-mark" title="{{config['description']}}">?</span>{% endif %}</td>
        {% endif %}
    </tr>
{%- endmacro %}

{% block title %}{% if title %}{{title}}{% else %}{{hostname}}{% endif %}{% endblock %}

{% block style %}
    {{super()}}
    <link rel="stylesheet" type="text/css" href="{{static_path}}css/ui.css" />
    <link rel="stylesheet" type="text/css" href="{{static_path}}css/main.css" />
    {% if frame %}
        <link rel="stylesheet" type="text/css" href="{{static_path}}css/frame.css" />
    {% endif %}
{% endblock %}

{% block script %}
    {{super()}}
    <script type="text/javascript" src="{{static_path}}js/ui.js"></script>
    <script type="text/javascript" src="{{static_path}}js/main.js"></script>
    {% if frame %}
        <script type="text/javascript" src="{{static_path}}js/frame.js"></script>
    {% endif %}
    <script type="text/javascript">
        var adminUsername = '{{admin_username}}';
        var frame = {% if frame %}true{% else %}false{% endif %};
        var hasLocalCamSupport = {% if has_motion %}true{% else %}false{% endif %};
        var hasNetCamSupport = {% if has_motion %}true{% else %}false{% endif %};
    </script>
{% endblock %}

{% block body %}
    {% if not frame %}
    <div class="header">
        <div class="header-container">
            <div class="settings-top-bar closed">
                <div class="button icon settings-button mouse-effect" title="definições"></div
                ><div class="button icon logout-button mouse-effect" title="mudar de utilizador"></div>
                <select class="styled" id="cameraSelect" {% if not add_remove_cameras %}style="display: none;"{% endif %}></select>
                <div class="button icon rem-camera-button mouse-effect" id="remCameraButton" title="remover câmera" {% if not add_remove_cameras %}style="display: none;"{% endif %}></div>
                <div class="button apply-button" id="applyButton">Aplicar</div>
                {% if hostname %}<div class="hostname">{{hostname}}</div>{% endif %}
            </div>
            <div class="logo">
                <a href="">
                    <span class="logo">Owl Eyed</span>
                    <img class="logo" src="{{static_path}}img/motioneye-logo.svg">
                </a>
            </div>
        </div>
    </div>
    {% endif %}
    {% if not frame %}
    <div class="page">
        <div class="settings closed">
            <div class="settings-container">
                <!-- Preferences -->
                <div class="settings-section-title" id="preferencesDiv">
                    <span class="help-mark" title="user preferences">?</span>
                    <a class="settings-section-title">Preferências</a>
                    <span class="minimize open"></span>
                </div>
                <table class="settings">
                    <tr class="settings-item" min="1" max="4" snap="1" ticksnum="4" decimals="0" id="layoutColumnsRow">
                        <td class="settings-item-label"><span class="settings-item-label">Disposição de Colunas</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled prefs" id="layoutColumnsSlider"></td>
                        <td><span class="help-mark" title="configurar o número de colunas das imagem das câmeras">?</span></td>
                    </tr>
                    <tr class="settings-item" min="1" max="4" snap="1" ticksnum="4" decimals="0" id="fitFramesVerticallyRow">
                        <td class="settings-item-label"><span class="settings-item-label">Ajustar Frames Verticalmente</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled prefs" id="fitFramesVerticallySwitch"></td>
                        <td><span class="help-mark" title="controla a possibilidade de redução do tamanho das frames para caberem verticalmente na janela">?</span></td>
                    </tr>
                    <tr class="settings-item" min="0" max="100" snap="2" ticksnum="6" decimals="0">
                        <td class="settings-item-label"><span class="settings-item-label">Ofuscamento da Taxa de Frames</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled prefs" id="framerateDimmerSlider"></td>
                        <td><span class="help-mark" title="ofusca a taxa de frames global para diminuir banda e tráfego de rede (não funciona em câmeras MJPEG)">?</span></td>
                    </tr>
                    <tr class="settings-item" min="1" max="100" snap="2" ticks="1|20|40|60|80|100" decimals="0">
                        <td class="settings-item-label"><span class="settings-item-label">Ofuscamento da Resolução</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled prefs" id="resolutionDimmerSlider"></td>
                        <td><span class="help-mark" title="ofusca a resolução atual de todas as câmeras para diminuir a largura de banda e tráfego de rede (não funciona em câmeras MJPEG)">?</span></td>
                    </tr>
                </table>
                
                <tr class="settings-item advanced-setting">
                    <td colspan="100"><div class="settings-item-separator" style="margin: 0px 0px 1.5em 0px;"></div></td>
                </tr>

                <!-- General Settings -->
                <div class="settings-section-title" id="generalSectionDiv">
                    <span class="help-mark" title="defenições gerais, sem relação com qualquer câmera">?</span>
                    <a class="settings-section-title">Defenições Gerais</a>
                    <span class="minimize open"></span>
                </div>
                <table class="settings">
                    <tr class="settings-item">
                        <td class="settings-item-label"><span class="settings-item-label">Defenições Avançadas</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled general main-config" id="showAdvancedSwitch"></td>
                        <td><span class="help-mark" title="ativar para aceder a todas as defenições avançadas">?</span></td>
                    </tr>
                    <tr class="settings-item" required="true" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Nome do Administrador</span></td>
                        <td class="settings-item-value"><input type="text" class="styled general main-config" id="adminUsernameEntry" readonly="readonly"></td>
                        <td><span class="help-mark" title="nome do utilizador usado para configurar o sistema">?</span></td>
                    </tr>
                    <tr class="settings-item" strip="true" {% if enable_reboot %}reboot="true"{% endif %}>
                        <td class="settings-item-label"><span class="settings-item-label">Password do Administrador</span></td>
                        <td class="settings-item-value"><input type="password" class="styled general main-config" id="adminPasswordEntry"></td>
                        <td><span class="help-mark" title="password de administrador">?</span></td>
                    </tr>
                    <tr class="settings-item" required="true" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Nome do Visualizador</span></td>
                        <td class="settings-item-value"><input type="text" class="styled general main-config" id="normalUsernameEntry"></td>
                        <td><span class="help-mark" title="nome do utilizador usado apenas para visualizar video">?</span></td>
                    </tr>
                    <tr class="settings-item" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Password do Visualizador</span></td>
                        <td class="settings-item-value"><input type="password" class="styled general main-config" id="normalPasswordEntry"></td>
                        <td><span class="help-mark" title="password usada para o vizualizador">?</span></td>
                    </tr>
                    {% for config in main_sections.get('general', {}).get('configs', []) %}
                        {{config_item(config)}}
                    {% endfor %}
                    <tr class="settings-item advanced-setting">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Versão Atual</span></td>
                        <td class="settings-item-value"><span class="settings-item-label">{{version}}</span></td>
                    </tr>
                    {% if enable_update %}
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Atualização do Software</span></td>
                        <td class="settings-item-value"><div class="button normal-button update-button" id="updateButton">Verificar</div></td>
                        <td><span class="help-mark" title="procura nova versão e actualiza o software (ATENÇÃO! ACTUALIZAÇÕES SERÃO EM INGLÊS)">?</span></td>
                    </tr>
                    {% endif %}
                    <tr class="settings-item advanced-setting{% if not enable_reboot %} hidden{% endif %}">
                        <td class="settings-item-label"><span class="settings-item-label">Power</span></td>
                        <td class="settings-item-value"><div class="button normal-button shut-down-button" id="shutDownButton">Encerrar</div></td>
                        <td><span class="help-mark" title="desliga o sistema">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting{% if not enable_reboot %} hidden{% endif %}">
                        <td class="settings-item-label"><span class="settings-item-label"></span></td>
                        <td class="settings-item-value"><div class="button normal-button reboot-button" id="rebootButton">Reiniciar</div></td>
                        <td><span class="help-mark" title="reinicia o sistema">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Configuração</span></td>
                        <td class="settings-item-value"><div class="button normal-button backup-button" id="backupButton">Cópia de Segurança</div></td>
                        <td><span class="help-mark" title="criar ficheiro da configuração atual, guardado localmente">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label"></span></td>
                        <td class="settings-item-value"><div class="button normal-button restore-button" id="restoreButton">Restauro de Cópia de Segurança</div></td>
                        <td><span class="help-mark" title="restaurar configuração de ficheiro de cópia de segurança, guardado anteriormente">?</span></td>
                    </tr>
                </table>

                <!-- Additional Main Sections -->
                {% for section in main_sections.values() %}
                {% if section.get('label') and section.get('configs') %}
                <div class="settings-section-title {% if section['advanced'] %}advanced-setting{% endif %}">
                    {% if section.get('onoff') %}<input type="checkbox" class="styled section additional-section {{section['name']}} main-config" id="{{section['name']}}Switch">{% endif %}
                    {% if section.get('description') %}<span class="help-mark" title="{{section['description']}}">?</span>{% endif %}
                    <a class="settings-section-title">{{section['label']}}</a>
                    <span class="minimize {% if section.get('open') %}open{% endif %}"></span>
                </div>
                <table class="settings {% if section.get('advanced') %}advanced-setting{% endif %}">
                    {% for config in section['configs'] %}
                        {{config_item(config)}}
                    {% endfor %}
                </table>
                {% endif %}                    
                {% endfor %}

                <tr class="settings-item advanced-setting">
                    <td colspan="100"><div class="settings-item-separator" style="margin: 0px 0px 1.5em 0px;"></div></td>
                </tr>
                
                <!-- Video Device -->
                <div class="settings-section-title" id="deviceSectionDiv">
                    <input type="checkbox" class="styled section device camera-config" id="videoDeviceEnabledSwitch">
                    <span class="help-mark" title="activar para activar esta câmera">?</span>
                    <a class="settings-section-title">Dispositivo de Vídeo</a>
                    <span class="minimize open"></span>
                </div>
                <table class="settings">
                    <tr class="settings-item" required="true" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Nome da Câmera</span></td>
                        <td class="settings-item-value"><input type="text" class="styled device camera-config" id="deviceNameEntry" placeholder="nome da câmera..."></td>
                        <td><span class="help-mark" title="nome para a câmera">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Câmera</span></td>
                        <td class="settings-item-value"><input type="text" class="styled device camera-config" id="deviceUrlEntry" readonly="readonly"></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Tipo de Câmera</span></td>
                        <td class="settings-item-value"><input type="text" class="styled device camera-config" id="deviceTypeEntry" readonly="readonly"></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Brilho Automático</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled device camera-config" id="autoBrightnessSwitch"></td>
                        <td><span class="help-mark" title="activar o brilho automático por software (recomendado apenas para câmeras sem brilho automático 'autobrightness')">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" snap="2" ticksnum="5" decimals="0" unit="%">
                        <td class="settings-item-label"><span class="settings-item-label">Brilho</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled device camera-config" id="brightnessSlider"></td>
                        <td><span class="help-mark" title="regular o nível de brilho desejado para a câmera">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" snap="2" ticksnum="5" decimals="0" unit="%">
                        <td class="settings-item-label"><span class="settings-item-label">Contraste</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled device camera-config" id="contrastSlider"></td>
                        <td><span class="help-mark" title="regular o nível de contraste desejado para a câmera">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" snap="2" ticksnum="5" decimals="0" unit="%">
                        <td class="settings-item-label"><span class="settings-item-label">Saturação</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled device camera-config" id="saturationSlider"></td>
                        <td><span class="help-mark" title="regular o nível de saturação desejado para a câmera">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" snap="2" ticksnum="5" decimals="0" unit="%">
                        <td class="settings-item-label"><span class="settings-item-label">Tonalidade</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled device camera-config" id="hueSlider"></td>
                        <td><span class="help-mark" title="regular o nível de tonalidade desejado para a câmera">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Resolução do Vídeo</span></td>
                        <td class="settings-item-value">
                            <select class="video-resolution styled device camera-config" id="resolutionSelect">
                            </select>
                        </td>
                        <td><span class="help-mark" title="resolução do vídeo (valores mais elevados produzem uma melhor qualidade mas requerem maior consumo de CPU, armazenamento, largura de banda de rede e consumo de bateria)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Rotação do Vídeo</span></td>
                        <td class="settings-item-value">
                            <select class="rotation styled device camera-config" id="rotationSelect">
                                <option value="0">0&deg;</option>
                                <option value="90">90&deg;</option>
                                <option value="180">180&deg;</option>
                                <option value="270">270&deg;</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="rodar a imagem capturada pela câmera caso a mesma não esteja posicionada corretamente">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="2" max="30" snap="0" ticks="2|5|10|15|20|25|30" decimals="0">
                        <td class="settings-item-label"><span class="settings-item-label">Taxa de Frames</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled device camera-config" id="framerateSlider"></td>
                        <td><span class="help-mark" title="configurar o número de frames por segundo capturadas pela câmera (valores mais elevados produzem vídeos de melhor qualidade mas requerem maior consumo de CPU, armazenamento, largura de banda de rede e consumo de bateria)">?</span></td>
                    </tr>
                    <!-- <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Outras Opções de Movimento</span></td>
                        <td class="settings-item-value"><textarea class="styled device camera-config" id="extraOptionsEntry" rows="3"></textarea></td>
                        <td><span class="help-mark" title="you can add here any extra options for the motion daemon (use the &quot;name value&quot; format, one option per line)">?</span></td>
                    </tr> -->
                    {% for config in camera_sections.get('device', {}).get('configs', []) %}
                        {{config_item(config)}}
                    {% endfor %}
                </table>
                
                <!-- File Storage -->
                <div class="settings-section-title advanced-setting" id="storageSectionDiv">
                    <span class="help-mark" title="definir onde são armazenados os ficheiros de média">?</span>
                    <a class="settings-section-title">Armazenamento de Ficheiros</a>
                    <span class="minimize"></span>
                </div>
                <table class="settings advanced-setting">
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Dispositivo de Armazenamento</span></td>
                        <td class="settings-item-value">
                            <select class="styled storage camera-config" id="storageDeviceSelect">
                            </select>
                        </td>
                        <td><span class="help-mark" title="definir o dispositivo de armazenamento onde os ficheiros de imagem e vídeo devem ser guardados">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="storageDevice=network-share" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Servidor de Rede</span></td>
                        <td class="settings-item-value"><input type="text" class="styled storage camera-config" id="networkServerEntry"></td>
                        <td><span class="help-mark" title="endereço do servidor de rede (endereço IP ou nome do computador)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="storageDevice=network-share" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Partilha na Rede</span></td>
                        <td class="settings-item-value"><input type="text" class="styled storage camera-config" id="networkShareNameEntry"></td>
                        <td><span class="help-mark" title="nome da partilha de rede">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="storageDevice=network-share" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Nome de Utilizador da Partilha Rede</span></td>
                        <td class="settings-item-value"><input type="text" class="styled storage camera-config" id="networkUsernameEntry"></td>
                        <td><span class="help-mark" title="nome de utilizador para aceder à partilha de rede (deixar em branco se não necessitar de nome de utilizador)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="storageDevice=network-share" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Password da Partilha de Rede</span></td>
                        <td class="settings-item-value"><input type="password" class="styled storage camera-config" id="networkPasswordEntry"></td>
                        <td><span class="help-mark" title="a password requerida pela partilha de rede (deixar em branco se não for necessária password)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Diretoria Raiz</span></td>
                        <td class="settings-item-value"><input type="text" class="styled storage camera-config" id="rootDirectoryEntry"></td>
                        <td><span class="help-mark" title="caminho para a raiz (no dispositivo de armazenamento selecionado) onde os ficheiros devem ser guardados">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Utilização de Disco</span></td>
                        <td class="settings-item-value">
                            <div id="diskUsageProgressBar" class="progress-bar"></div>
                        </td>
                        <td><span class="help-mark" title="espaço utilizado/total do disco onde está a directoria raiz">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Upload dos Ficheiros de Média</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled storage camera-config" id="uploadEnabledSwitch"></td>
                        <td><span class="help-mark" title="activar para enviar os ficheiros de média para um serviço externo">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="uploadEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Serviço de Upload</span></td>
                        <td class="settings-item-value">
                            <select class="styled storage camera-config" id="uploadServiceSelect">
<!--                                 <option value="ftp">Servidor FTP</option> -->
<!--                                 <option value="sftp">Servidor SFTP</option> -->
<!--                                 <option value="http">Servidor HTTP</option> -->
<!--                                 <option value="https">Servidor HTTPS</option> -->
                                <option value="gdrive">Google Drive</option>
                                <option value="dropbox">Dropbox</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="definir o serviço para o qual os ficheiros de média devem ser enviados">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="uploadEnabled uploadService=(ftp|sftp|http|https)">
                        <td class="settings-item-label"><span class="settings-item-label">Endereço do Servidor</span></td>
                        <td class="settings-item-value"><input type="text" class="styled storage camera-config" id="uploadServerEntry"></td>
                        <td><span class="help-mark" title="nome de domínio ou endereço IP do servidor (ex.: ftp.exemplo.com ou 192.168.1.3)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" min="1" max="65535" depends="uploadEnabled uploadService=(ftp|sftp|http|https)">
                        <td class="settings-item-label"><span class="settings-item-label">Porto do Servidor</span></td>
                        <td class="settings-item-value"><input type="text" class="number styled storage camera-config" id="uploadPortEntry"></td>
                        <td><span class="help-mark" title="número do porto a usar para a conecção com o serviço (deixar em branco para usar o valor por defeito)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="uploadEnabled uploadService=(http|https)">
                        <td class="settings-item-label"><span class="settings-item-label">Método</span></td>
                        <td class="settings-item-value">
                            <select class="styled storage camera-config" id="uploadMethodSelect">
                                <option value="post">POST</option>
                                <option value="put">PUT</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="método HTTP a usar ao enviar os ficheiros">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="uploadEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Localização</span></td>
                        <td class="settings-item-value"><input type="text" class="styled storage camera-config" id="uploadLocationEntry"></td>
                        <td><span class="help-mark" title="local (caminho da raiz) para onde os ficheiro de média devem ser enviados (ex.: /files/cam1/)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="uploadEnabled uploadService=(dropbox)">
                        <td class="settings-item-label"><span class="settings-item-label">Incluir Subpastas</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled storage camera-config" id="uploadSubfoldersSwitch"></td>
                        <td><span class="help-mark" title="activar para enviar os ficheiros de média juntamente com as suas subpastas, em vez de colocá-los diretamente na raiz">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="uploadEnabled uploadService=(ftp|sftp|http|https)">
                        <td class="settings-item-label"><span class="settings-item-label">Nome de Utilizador</span></td>
                        <td class="settings-item-value"><input type="text" class="styled storage camera-config" id="uploadUsernameEntry"></td>
                        <td><span class="help-mark" title="nome de utilizador da conta do serviço de envio">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="uploadEnabled uploadService=(ftp|sftp|http|https)">
                        <td class="settings-item-label"><span class="settings-item-label">Password</span></td>
                        <td class="settings-item-value"><input type="password" class="styled storage camera-config" id="uploadPasswordEntry"></td>
                        <td><span class="help-mark" title="password da conta do serviço de envio">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="uploadEnabled uploadService=(gdrive|dropbox)">
                        <td class="settings-item-label"><span class="settings-item-label">Chave de Autorização</span></td>
                        <td class="settings-item-value"><input type="password" class="styled storage camera-config" id="uploadAuthorizationKeyEntry"></td>
                        <td><span class="help-mark" title="chave usada para a autenticação no serviço de upload (normalmente requerida apenas na configuração)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="uploadEnabled uploadService=(gdrive|dropbox)">
                        <td class="settings-item-label"><span class="settings-item-label"></span></td>
                        <td class="settings-item-value">
                            <div class="html styled storage camera-config" id="authorizeLinkHtml">
                                <a href="javascript:authorizeUpload()">Obter Chave</a>
                            </div>
                        </td>
                        <td><span class="help-mark" title="clicar para obter a chave de autorização">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="uploadEnabled">
                        <td class="settings-item-label"><span class="settings-item-label"></span></td>
                        <td class="settings-item-value"><div class="button normal-button test-button" id="uploadTestButton">Testar o Serviço</div></td>
                        <td><span class="help-mark" title="clicar para testar o serviço de upload depois de preeenchidos os detalhes requeridos">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Call A Web Hook</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled storage camera-config" id="webHookStorageEnabledSwitch"></td>
                        <td><span class="help-mark" title="enable this if you want a URL to be requested after a media file is created">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="webHookStorageEnabled" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Web Hook URL</span></td>
                        <td class="settings-item-value"><input type="text" class="styled storage camera-config" id="webHookStorageUrlEntry" placeholder="e.g. http://example.com/notify/"></td>
                        <td><span class="help-mark" title="a URL to be requested when motion is detected; the following special tokens are accepted: %Y = year, %m = month, %d = date, %H = hour, %M = minute, %S = second, %f = file path">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="webHookStorageEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">HTTP Method</span></td>
                        <td class="settings-item-value">
                            <select class="styled storage camera-config" id="webHookStorageHttpMethodSelect">
                                <option value="GET">GET</option>
                                <option value="POST">POST (query)</option>
                                <option value="POSTf">POST (form)</option>
                                <option value="POSTj">POST (json)</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="the HTTP method to use when requesting the web hook URL (the given URL-encoded parameters will in fact be transmitted as indicated here)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Run A Command</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled storage camera-config" id="commandStorageEnabledSwitch"></td>
                        <td><span class="help-mark" title="enable this if you want to execute a command after a media file is created">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="commandStorageEnabled" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Command</span></td>
                        <td class="settings-item-value"><input type="text" class="styled storage camera-config" id="commandStorageEntry" placeholder="command..."></td>
                        <td><span class="help-mark" title="a command to be executed after a media file is created; multiple commands can be separated by a semicolon; don't use semicolons inside commands; the following special tokens are accepted: %Y = year, %m = month, %d = date, %H = hour, %M = minute, %S = second, %f = file path">?</span></td>
                    </tr>
                    {% for config in camera_sections.get('storage', {}).get('configs', []) %}
                        {{config_item(config)}}
                    {% endfor %}
                </table>
                
                <!-- Text Overlay -->
                <div class="settings-section-title advanced-setting" id="textOverlaySectionDiv">
                    <input type="checkbox" class="styled section text-overlay camera-config" id="textOverlayEnabledSwitch">
                    <span class="help-mark" title="escolha qual a informação mostrada nas frames captiuradas">?</span>
                    <a class="settings-section-title">Sobreposição de Texto</a>
                    <span class="minimize"></span>
                </div>
                <table class="settings advanced-setting">
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Texto Esquerdo</span></td>
                        <td class="settings-item-value">
                            <select class="styled text-overlay camera-config" id="leftTextTypeSelect">
                                <option value="camera-name">Nome da Câmera</option>
                                <option value="timestamp">Data/Hora</option>
                                <option value="custom-text">Texto Personalizado</option>
                                <option value="disabled">Desativado</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="configurar o texto a mostrar nos vídeos e imagens, no canto inferior esquerdo">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="leftTextType=custom-text" strip="true">
                        <td class="settings-item-label"></td>
                        <td class="settings-item-value"><input type="text" class="styled text-overlay camera-config" id="leftTextEntry" placeholder="texto personalizado..."></td>
                        <td><span class="help-mark" title="configurar o texto personalizado; são aceitaveis os seguintes símbolos especiais: %Y = ano, %m = mês, %d = dia, %H = hora, %M = minuto, %S = segundo, %T = HH:MM:SS, %q = número de frame, \n = parágrafo">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Texto Direito</span></td>
                        <td class="settings-item-value">
                            <select class="styled text-overlay camera-config" id="rightTextTypeSelect">
                                <option value="camera-name">Nome da Câmera</option>
                                <option value="timestamp">Data/Hora</option>
                                <option value="custom-text">Texto Personalizado</option>
                                <option value="disabled">Desativado</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="configura o texto mostrado nos vídeos e imagens, no canto inferior direito">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="rightTextType=custom-text" strip="true">
                        <td class="settings-item-label"></td>
                        <td class="settings-item-value"><input type="text" class="styled text-overlay camera-config" id="rightTextEntry" placeholder="texto personalizado..."></td>
                        <td><span class="help-mark" title="configurar o texto personalizado; são aceitaveis os seguintes símbolos especiais: %Y = ano, %m = mês, %d = dia, %H = hora, %M = minuto, %S = segundo, %T = HH:MM:SS, %q = número de frame, \n = parágrafo">?</span></td>
                    </tr>
                    {% for config in camera_sections.get('text-overlay', {}).get('configs', []) %}
                        {{config_item(config)}}
                    {% endfor %}
                </table>

                <!-- Video Streaming -->
                <div class="settings-section-title" minimize-switch-independent="true" id="streamingSectionDiv">
                    <input type="checkbox" class="styled section streaming camera-config" id="videoStreamingEnabledSwitch">
                    <span class="help-mark" title="activar para transmissão de vídeo nesta câmera">?</span>
                    <a class="settings-section-title">Transmissão de Vídeo</a>
                    <span class="minimize"></span>
                </div>
                <table class="settings">
                    <tr class="settings-item advanced-setting" min="1" max="30" snap="0" ticks="1|5|10|15|20|25|30" decimals="0">
                        <td class="settings-item-label"><span class="settings-item-label">Taxa de Frames da Transmissão</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled streaming camera-config" id="streamingFramerateSlider"></td>
                        <td><span class="help-mark" title="configurar o número de frames por segundo na tansmissão ao vivo">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" snap="2" ticksnum="5" decimals="0" unit="%">
                        <td class="settings-item-label"><span class="settings-item-label">Qualidade da Transmissão</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled streaming camera-config" id="streamingQualitySlider"></td>
                        <td><span class="help-mark" title="configurar a qualidade da transmissão ao vivo (valores mais elevados produzem uma melhor qualidade de vídeo mas requerem mais largura de banda de rede, CPU e bateria)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Redimensionamento da Imagem de Transmissão</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled streaming camera-config" id="streamingServerResizeSwitch"></td>
                        <td><span class="help-mark" title="quando activo, as imagens são redimensionadas andes de serem enviadas para o browser (não activar em CPUs lentos)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" snap="2" ticksnum="5" decimals="0" unit="%" depends="streamingServerResize">
                        <td class="settings-item-label"><span class="settings-item-label">Resolução da Transmissão</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled streaming camera-config" id="streamingResolutionSlider"></td>
                        <td><span class="help-mark" title="resolução da transmissão em percentagem da resolução do dispositivo de vídeo (valores mais elevados produzem vídeo de melhor qualidade mas requerem maior largura de banda e maior consumo de bateria)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="1024" max="65535" depends="videoStreamingEnabled" required="true">
                        <td class="settings-item-label"><span class="settings-item-label">Porto de Transmissão</span></td>
                        <td class="settings-item-value"><input type="text" class="styled streaming camera-config" id="streamingPortEntry"></td>
                        <td><span class="help-mark" title="configurar o porto TCP no qual o servidor da transmissão escuta (espera ligação)">?</span></td>
                    </tr>
                    {% if not old_motion %}
                    <tr class="settings-item advanced-setting" depends="videoStreamingEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Método de Autenticação</span></td>
                        <td class="settings-item-value">
                            <select class="styled streaming camera-config" id="streamingAuthModeSelect">
                                <option value="disabled">Desativado</option>
                                <option value="basic">Básico</option>
                                <option value="digest">Digest</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="método de autenticação a usar para aceder à transmissão (usar Básico em vez de Digest se encontrar problemas com aplicações de terceiros)">?</span></td>
                    </tr>
                    {% endif %}
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Optimização por Movimento</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled streaming camera-config" id="streamingMotion"></td>
                        <td><span class="help-mark" title="activar se desejar uma menor taxa de frames na transmissão ao vivo quando não seja detectado movimento (poupa a bateria)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="videoStreamingEnabled">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">URL com Imagem Capturada (snapshot)</span></td>
                        <td class="settings-item-value"><input type="text" class="styled streaming camera-config" id="streamingSnapshotUrlEntry" readonly="readonly"></td>
                        <td><span class="help-mark" title="URL com imagem JPEG da mais recente captura da câmera">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="videoStreamingEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">URL de Transmissão</span></td>
                        <td class="settings-item-value"><input type="text" class="styled streaming camera-config" id="streamingMjpgUrlEntry" readonly="readonly"></td>
                        <td><span class="help-mark" title="URL de transmição vídeo MJPEG da câmera (não existe proteção com password para este URL!)">?</span></td>
                    </tr>
                    <!-- <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Embed URL</span></td>
                        <td class="settings-item-value"><input type="text" class="styled streaming camera-config" id="streamingEmbedUrlEntry" readonly="readonly"></td>
                        <td><span class="help-mark" title="a URL that provides a minimal HTML document containing the camera frame, ready to be embedded">?</span></td>
                    </tr> -->
                    {% for config in camera_sections.get('streaming', {}).get('configs', []) %}
                        {{config_item(config)}}
                    {% endfor %}
                </table>
                
                <!-- Still Images -->
                <div class="settings-section-title" id="stillImagesSectionDiv">
                    <input type="checkbox" class="styled section still-images camera-config" id="stillImagesEnabledSwitch">
                    <span class="help-mark" title="activar para capturar imagens estáticas (fotogramas)">?</span>
                    <a class="settings-section-title">Imagens Estáticas</a>
                    <span class="minimize"></span>
                </div>
                <table class="settings">
                    <tr class="settings-item advanced-setting" required="true" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Nome do Ficheiro de Imagem</span></td>
                        <td class="settings-item-value"><input type="text" class="styled still-images camera-config" id="imageFileNameEntry" placeholder="padronização do nome do ficheiro..."></td>
                        <td><span class="help-mark" title="configurar o padrão para os nomes de ficheiro de imagem (JPEG); são aceitados os seguintes símboloes especiais: %Y = ano, %m = mês, %d = dia, %H = hora, %M = minuto, %S = segundo, %q = número da frame, %v = número do evento, / = subpasta">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" snap="2" ticksnum="5" decimals="0" unit="%">
                        <td class="settings-item-label"><span class="settings-item-label">Qualidade da Imagem</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled still-images camera-config" id="imageQualitySlider"></td>
                        <td><span class="help-mark" title="configura a qualidade da imagem JPEG (valores mais elevados produzem imagens de maior qualidade mas utilizam mais espaço em disco)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Método de Captura</span></td>
                        <td class="settings-item-value">
                            <select class="styled still-images camera-config" id="captureModeSelect">
                                <option value="motion-triggered">Ativado por Movimento</option>
                                <option value="interval-snapshots">Captura por Intervalo no Tempo</option>
                                <option value="all-frames">Todas as Frames</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="configurar o método de captura da imagem: Activado por Movimento = uma imagem é capturada cada vez que for detetado movimento, Captura por Intervalo no Tempo = uma imagem é capturarda a todos os x segundos, Todas as Frames = guarda cada frame num ficheiro de imagem">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="1" max="86400" required="true" depends="captureMode=interval-snapshots">
                        <td class="settings-item-label"><span class="settings-item-label">Captura por Intervalo no Tempo</span></td>
                        <td class="settings-item-value"><input type="text" class="styled number still-images camera-config" id="snapshotIntervalEntry"><span class="settings-item-unit">segundos</span></td>
                        <td><span class="help-mark" title="configura o intervalo (em segundos) para a captura de imagem">?</span></td>
                    </tr>
                    <tr class="settings-item">
                        <td class="settings-item-label"><span class="settings-item-label">Conservação das Imagens</span></td>
                        <td class="settings-item-value">
                            <select class="styled still-images camera-config" id="preservePicturesSelect">
                                <option value="1">Por um Dia</option>
                                <option value="7">Por ma Semana</option>
                                <option value="30">Por um Mês</option>
                                <option value="365">Por um Ano</option>
                                <option value="0">Para Sempre</option>
                                <option value="-1">Personalizada</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="imagens anteriores à duração especificada serão automáticamente eliminadas para libertar espaço de armazenamento">?</span></td>
                    </tr>
                    <tr class="settings-item" min="1" max="3650" depends="preservePictures=-1" required="true">
                        <td class="settings-item-label"><span class="settings-item-label">Tempo de Vida das Imagens</span></td>
                        <td class="settings-item-value"><input type="text" class="styled number still-images camera-config" id="picturesLifetimeEntry"><span class="settings-item-unit">dias</span></td>
                        <td><span class="help-mark" title="configurar o número de dias depois dos quais as imagens serão eliminadas automáticamente">?</span></td>
                    </tr>
                    {% for config in camera_sections.get('still-images', {}).get('configs', []) %}
                        {{config_item(config)}}
                    {% endfor %}
                </table>
                
                <!-- Movies -->
                <div class="settings-section-title" id="moviesSectionDiv">
                    <input type="checkbox" class="styled section movies camera-config" id="moviesEnabledSwitch">
                    <span class="help-mark" title="activar para gravar vídeos">?</span>
                    <a class="settings-section-title">Vídeos</a>
                    <span class="minimize"></span>
                </div>
                <table class="settings">
                    <tr class="settings-item advanced-setting" required="true" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Nome do Ficheiro de Vídeo</span></td>
                        <td class="settings-item-value"><input type="text" class="styled movies camera-config" id="movieFileNameEntry" placeholder="padronização do nome do ficheiro..."></td>
                        <td><span class="help-mark" title="configura o padrão para os nomes de ficheiro de vídeo (MPEG); são aceitados os seguintes símboloes especiais: %Y = ano, %m = mês, %d = dia, %H = hora, %M = minuto, %S = segundo, %q = número da frame, %v = número do evento, / = subpasta">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" snap="2" ticksnum="5" decimals="0" unit="%">
                        <td class="settings-item-label"><span class="settings-item-label">Qualidade do Vídeo</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled movies camera-config" id="movieQualitySlider"></td>
                        <td><span class="help-mark" title="configura a qualidade do vídeo MPEG (valores mais elevados produzem vídeos de maior qualidade mas utilizam mais espaço em disco)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Método de Gravação</span></td>
                        <td class="settings-item-value">
                            <select class="styled movies camera-config" id="recordingModeSelect">
                                <option value="motion-triggered">Activado por Movimento</option>
                                <option value="continuous">Gravação Contínua</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="configurar o método de gravação: Activado por Movimento = um novo vídeo é gravado cada vez que for detetado movimento, Gravação Contínua = um ficheir de vídeo grande">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="86400" required="true">
                        <td class="settings-item-label"><span class="settings-item-label">Tamanho Máximo do Vídeo</span></td>
                        <td class="settings-item-value"><input type="text" class="number styled movies camera-config" id="maxMovieLengthEntry"><span class="settings-item-unit">segundos</span></td>
                        <td><span class="help-mark" title="configurar o tamanho máximo dos vídeos, em segundos; se o evento de movimento durar mais, um novo ficheiro de vídeo é criado; usar 0 para tamanho ilimitado">?</span></td>
                    </tr>
                    <tr class="settings-item">
                        <td class="settings-item-label"><span class="settings-item-label">Conservação dos Vídeos</span></td>
                        <td class="settings-item-value">
                            <select class="styled movies camera-config" id="preserveMoviesSelect">
                                <option value="1">Por um Dia</option>
                                <option value="7">Por uma Semana</option>
                                <option value="30">Por um Mês</option>
                                <option value="365">Por um Ano</option>
                                <option value="0">Para Sempre</option>
                                <option value="-1">Personalizada</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="vídeos anteriores à duração especificada serão automáticamente eliminados para libertar espaço de armazenamento">?</span></td>
                    </tr>
                    <tr class="settings-item" min="1" max="3650" depends="preserveMovies=-1" required="true">
                        <td class="settings-item-label"><span class="settings-item-label">Tempo de Vida dos Vídeos</span></td>
                        <td class="settings-item-value"><input type="text" class="styled number movies camera-config" id="moviesLifetimeEntry"><span class="settings-item-unit">dias</span></td>
                        <td><span class="help-mark" title="configurar o número de dias depois dos quais os vídeos serão eliminados automáticamente">?</span></td>
                    </tr>
                    {% for config in camera_sections.get('movies', {}).get('configs', []) %}
                        {{config_item(config)}}
                    {% endfor %}
                </table>

                <!-- Motion Detection -->
                <div class="settings-section-title advanced-setting" id="motionDetectionSectionDiv">
                    <input type="checkbox" class="styled section motion-detection camera-config" id="motionDetectionEnabledSwitch">
                    <span class="help-mark" title="activar para usar e configurar o mecanismo de deteção de movimentos">?</span>
                    <a class="settings-section-title">Deteção de Movimento</a>
                    <span class="minimize"></span>
                </div>
                <table class="settings advanced-setting">
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Mostrar Alterações nas Frames</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled motion-detection camera-config" id="showFrameChangesSwitch"></td>
                        <td><span class="help-mark" title="quando activado, alterações nas frames (número de pixeis bem como área alterada) serão mostradas no vídeo; activar esta opção temporariamente como ajuda na configuração dos parâmetros do mecanismo de deteção de movimentos">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="20" snap="0" ticksnum="5" decimals="1" unit="%">
                        <td class="settings-item-label"><span class="settings-item-label">Limite de Alterações nas Frames</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled motion-detection camera-config" id="frameChangeThresholdSlider"></td>
                        <td><span class="help-mark" title="indica a percentagem mínima da imagem que deve alterar entre duas frames sucessivas a fim de que seja detetado movimento (valores mais baixos geram uma deteção mais sensível, mas são mais propensos a falsos positivos)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td class="settings-item-label"><span class="settings-item-label">Deteção Automática de Ruído</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled motion-detection camera-config" id="autoNoiseDetectSwitch"></td>
                        <td><span class="help-mark" title="activar para ajustar automáticamente o nível de ruído">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="25" snap="0" ticksnum="6" decimals="0" unit="%" depends="!autoNoiseDetect">
                        <td class="settings-item-label"><span class="settings-item-label">Nível de Ruído</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled motion-detection camera-config" id="noiseLevelSlider"></td>
                        <td><span class="help-mark" title="ajustar manualmente o nível de ruído para um valor fixo">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" snap="2" ticksnum="5" decimals="0" unit="%">
                        <td class="settings-item-label"><span class="settings-item-label">Deteção de Mudança na Iluminação</span></td>
                        <td class="settings-item-value"><input type="text" class="range styled motion-detection camera-config" id="lightSwitchDetectSlider"></td>
                        <td><span class="help-mark" title="configurar a percentagem da imagem que deverá alterar para que o evento seja considerado como uma repentina mudança na iluminação em vez de movimento (0% desactiva a função)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="1" max="86400" required="true">
                        <td class="settings-item-label"><span class="settings-item-label">Interrupção de Movimento</span></td>
                        <td class="settings-item-value"><input type="text" class="number styled motion-detection camera-config" id="eventGapEntry"><span class="settings-item-unit">segundos</span></td>
                        <td><span class="help-mark" title="configurar o número de segundos de silêncio (sem movimento) que marca o fim do evento de movimento">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" required="true">
                        <td class="settings-item-label"><span class="settings-item-label">Capturadas Anteriormente</span></td>
                        <td class="settings-item-value"><input type="text" class="number styled motion-detection camera-config" id="preCaptureEntry"><span class="settings-item-unit">frames</span></td>
                        <td><span class="help-mark" title="configurar o número de frames a serem capturadas (e incluidas no vídeo) anteriores ao evento de movimento ser detetado">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="100" required="true">
                        <td class="settings-item-label"><span class="settings-item-label">Capturadas Posteriormente</span></td>
                        <td class="settings-item-value"><input type="text" class="number styled motion-detection camera-config" id="postCaptureEntry"><span class="settings-item-unit">frames</span></td>
                        <td><span class="help-mark" title="configurar o número de frames a serem capturadas (e incluidas no vídeo) após o evento de movimento ter terminado">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="1" max="1000" required="true">
                        <td class="settings-item-label"><span class="settings-item-label">Frames de Movimento Mínimas</span></td>
                        <td class="settings-item-value"><input type="text" class="number styled motion-detection camera-config" id="minimumMotionFramesEntry"><span class="settings-item-unit">frames</span></td>
                        <td><span class="help-mark" title="configurar o número sucessivo de frames de movimento necessárias para despoletar o evento de movimento">?</span></td>
                    </tr>
                    {% for config in camera_sections.get('motion-detection', {}).get('configs', []) %}
                        {{config_item(config)}}
                    {% endfor %}
                </table>
                
                <!-- Motion Notifications -->
                <div class="settings-section-title advanced-setting" id="notificationsSectionDiv">
                    <span class="help-mark" title="activar para notificações sempre que seja detetado movimento">?</span>
                    <a class="settings-section-title">Notificações de Movimento</a>
                    <span class="minimizerm "></span>
                </div>
                <table class="settings">
                    <tr class="settings-item advanced-setting" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Enviar Email</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled notifications camera-config" id="emailNotificationsEnabledSwitch"></td>
                        <td><span class="help-mark" title="activar para receber um email de cada vez que um evento de movimento seja detetado">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="emailNotificationsEnabled motionDetectionEnabled" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Endereços de Email</span></td>
                        <td class="settings-item-value"><input type="text" class="styled notifications camera-config" id="emailAddressesEntry" placeholder="endereços de email..."></td>
                        <td><span class="help-mark" title="endereços de email (separados por virgula) adicionados recebem notificação de cada vez que um evento de movimento seja detetado">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="emailNotificationsEnabled motionDetectionEnabled" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Servidor SMTP</span></td>
                        <td class="settings-item-value"><input type="text" class="styled notifications camera-config" id="smtpServerEntry" placeholder="ex.: smtp.gmail.com"></td>
                        <td><span class="help-mark" title="introduzir o nome do computador ou endereço IP do servidor SMTP (para Gmail usar smtp.gmail.com)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="1" max="65535" depends="emailNotificationsEnabled motionDetectionEnabled" required="true">
                        <td class="settings-item-label"><span class="settings-item-label">Porto SMTP</span></td>
                        <td class="settings-item-value"><input type="text" class="styled number notifications camera-config" id="smtpPortEntry" placeholder="ex.: 587"></td>
                        <td><span class="help-mark" title="introduzir o porto usado pelo servidor SMTP (normalmente 465 para coneções sem-TLS e 587 para coneções com TLS)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="emailNotificationsEnabled motionDetectionEnabled" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Conta SMTP</span></td>
                        <td class="settings-item-value"><input type="text" class="styled notifications camera-config" id="smtpAccountEntry" placeholder="ex.: conta@gmail.com..."></td>
                        <td><span class="help-mark" title="introduzir a conta SMTP (normalmente o endereço de email)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="emailNotificationsEnabled motionDetectionEnabled" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Password SMTP</span></td>
                        <td class="settings-item-value"><input type="password" class="styled notifications camera-config" id="smtpPasswordEntry"></td>
                        <td><span class="help-mark" title="introduzir a password da conta SMTP (para Gmail usar a password do Google)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="emailNotificationsEnabled motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Usar TLS</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled notifications camera-config" id="smtpTlsSwitch"></td>
                        <td><span class="help-mark" title="activar se o servidor SMTP requer TLS (Gmail necessita TLS)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" min="0" max="60" required="true" depends="emailNotificationsEnabled motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Intervalo de Tempo de Imagens em Anexo</span></td>
                        <td class="settings-item-value"><input type="text" class="number styled notifications camera-config" id="emailPictureTimeSpanEntry"><span class="settings-item-unit">segundos</span></td>
                        <td><span class="help-mark" title="definir o intervalo de tempo a utilizar na criação de anexos de email (valores mais elevados geram emails com maior número de imagens à custa de um aumento no atraso de notificação); definir 0 para desativar o anexo de imagens">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="motionDetectionEnabled">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Call A Web Hook</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled notifications camera-config" id="webHookNotificationsEnabledSwitch"></td>
                        <td><span class="help-mark" title="enable this if you want a URL to be requested whenever a motion event is detected">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="webHookNotificationsEnabled motionDetectionEnabled" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Web Hook URL</span></td>
                        <td class="settings-item-value"><input type="text" class="styled notifications camera-config" id="webHookNotificationsUrlEntry" placeholder="e.g. http://example.com/notify/"></td>
                        <td><span class="help-mark" title="a URL to be requested when motion is detected; the following special tokens are accepted: %Y = year, %m = month, %d = date, %H = hour, %M = minute, %S = second, %q = frame number">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="webHookNotificationsEnabled motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">HTTP Method</span></td>
                        <td class="settings-item-value">
                            <select class="styled notifications camera-config" id="webHookNotificationsHttpMethodSelect">
                                <option value="GET">GET</option>
                                <option value="POST">POST (query)</option>
                                <option value="POSTf">POST (form)</option>
                                <option value="POSTj">POST (json)</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="the HTTP method to use when requesting the web hook URL (the given URL-encoded parameters will in fact be transmitted as indicated here)">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="motionDetectionEnabled">
                        <td colspan="100"><div class="settings-item-separator"></div></td>
                    </tr>
                    <tr class="settings-item advanced-setting" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Run A Command</span></td>
                        <td class="settings-item-value"><input type="checkbox" class="styled notifications camera-config" id="commandNotificationsEnabledSwitch"></td>
                        <td><span class="help-mark" title="enable this if you want to execute a command whenever a motion event is detected">?</span></td>
                    </tr>
                    <tr class="settings-item advanced-setting" required="true" depends="commandNotificationsEnabled motionDetectionEnabled" strip="true">
                        <td class="settings-item-label"><span class="settings-item-label">Command</span></td>
                        <td class="settings-item-value"><input type="text" class="styled notifications camera-config" id="commandNotificationsEntry" placeholder="command..."></td>
                        <td><span class="help-mark" title="a command to be executed when motion is detected; multiple commands can be separated by a semicolon; don't use semilcolons inside commands; the following special tokens are accepted: %Y = year, %m = month, %d = date, %H = hour, %M = minute, %S = second, %q = frame number">?</span></td>
                    </tr>
                    {% for config in camera_sections.get('notifications', {}).get('configs', []) %}
                        {{config_item(config, "motionDetectionEnabled")}}
                    {% endfor %}
                </table>

                <!-- Working Schedule -->
                <div class="settings-section-title" depends="motionDetectionEnabled" id="workingScheduleSectionDiv">
                    <input type="checkbox" class="styled section working-schedule camera-config" id="workingScheduleEnabledSwitch">
                    <span class="help-mark" title="activar para definir um horário de trabalho semanal para a deteção de movimento">?</span>
                    <a class="settings-section-title">Horário de Trabalho/a>
                    <span class="minimize"></span>
                </div>
                <table class="settings">
                    <tr class="settings-item" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Segunda-feira</span></td>
                        <td class="settings-item-value">
                            <input type="checkbox" class="styled working-schedule camera-config" id="mondayEnabledSwitch">
                            <span class="settings-item-unit time">das</span><input type="text" class="styled working-schedule time camera-config" id="mondayFromEntry">
                            <span class="settings-item-unit time">às</span><input type="text" class="styled working-schedule time camera-config" id="mondayToEntry">
                        </td>
                        <td><span class="help-mark" title="configurar o horário de trabalho para Segunda-feira">?</span></td>
                    </tr>
                    <tr class="settings-item" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Terça-feira</span></td>
                        <td class="settings-item-value">
                            <input type="checkbox" class="styled working-schedule camera-config" id="tuesdayEnabledSwitch">
                            <span class="settings-item-unit time">das</span><input type="text" class="styled working-schedule time camera-config" id="tuesdayFromEntry">
                            <span class="settings-item-unit time">às</span><input type="text" class="styled working-schedule time camera-config" id="tuesdayToEntry">
                        </td>
                        <td><span class="help-mark" title="configurar o horário de trabalho para Terça-feira">?</span></td>
                    </tr>
                    <tr class="settings-item" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Quarta-feira</span></td>
                        <td class="settings-item-value">
                            <input type="checkbox" class="styled working-schedule camera-config" id="wednesdayEnabledSwitch">
                            <span class="settings-item-unit time">das</span><input type="text" class="styled working-schedule time camera-config" id="wednesdayFromEntry">
                            <span class="settings-item-unit time">às</span><input type="text" class="styled working-schedule time camera-config" id="wednesdayToEntry">
                        </td>
                        <td><span class="help-mark" title="configurar o horário de trabalho para Quarta-feira">?</span></td>
                    </tr>
                    <tr class="settings-item" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Quinta-feira</span></td>
                        <td class="settings-item-value">
                            <input type="checkbox" class="styled working-schedule camera-config" id="thursdayEnabledSwitch">
                            <span class="settings-item-unit time">das</span><input type="text" class="styled working-schedule time camera-config" id="thursdayFromEntry">
                            <span class="settings-item-unit time">às</span><input type="text" class="styled working-schedule time camera-config" id="thursdayToEntry">
                        </td>
                        <td><span class="help-mark" title="configurar o horário de trabalho para Quinta-feira">?</span></td>
                    </tr>
                    <tr class="settings-item" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Sexta-feira</span></td>
                        <td class="settings-item-value">
                            <input type="checkbox" class="styled working-schedule camera-config" id="fridayEnabledSwitch">
                            <span class="settings-item-unit time">das</span><input type="text" class="styled working-schedule time camera-config" id="fridayFromEntry">
                            <span class="settings-item-unit time">às</span><input type="text" class="styled working-schedule time camera-config" id="fridayToEntry">
                        </td>
                        <td><span class="help-mark" title="configurar o horário de trabalho para Sexta-feira">?</span></td>
                    </tr>
                    <tr class="settings-item" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Sábado</span></td>
                        <td class="settings-item-value">
                            <input type="checkbox" class="styled working-schedule camera-config" id="saturdayEnabledSwitch">
                            <span class="settings-item-unit time">das</span><input type="text" class="styled working-schedule time camera-config" id="saturdayFromEntry">
                            <span class="settings-item-unit time">às</span><input type="text" class="styled working-schedule time camera-config" id="saturdayToEntry">
                        </td>
                        <td><span class="help-mark" title="configurar o horário de trabalho para Sábado">?</span></td>
                    </tr>
                    <tr class="settings-item" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Domingo</span></td>
                        <td class="settings-item-value">
                            <input type="checkbox" class="styled working-schedule camera-config" id="sundayEnabledSwitch">
                            <span class="settings-item-unit time">das</span><input type="text" class="styled working-schedule time camera-config" id="sundayFromEntry">
                            <span class="settings-item-unit time">às</span><input type="text" class="styled working-schedule time camera-config" id="sundayToEntry">
                        </td>
                        <td><span class="help-mark" title="configurar o horário de trabalho para Domingo">?</span></td>
                    </tr>
                    <tr class="settings-item" depends="motionDetectionEnabled">
                        <td class="settings-item-label"><span class="settings-item-label">Detetar Movimento</span></td>
                        <td class="settings-item-value">
                            <select class="styled working-schedule camera-config" id="workingScheduleTypeSelect">
                                <option value="during">Durante o Horário de Trabalho</option>
                                <option value="outside">Fora do Horário de Trabalho</option>
                            </select>
                        </td>
                        <td><span class="help-mark" title="configurar quando deve ser ativada a deteção de movimento, durante ou fora do horário de trabalho">?</span></td>
                    </tr>
                    {% for config in camera_sections.get('working-schedule', {}).get('configs', []) %}
                        {{config_item(config, "motionDetectionEnabled")}}
                    {% endfor %}
                </table>

                <!-- Additional Camera Sections -->
                {% for section in camera_sections.values() %}
                {% if section.get('label') and section.get('configs') %}
                <div class="settings-section-title {% if section['advanced'] %}advanced-setting{% endif %}">
                    {% if section.get('onoff') %}<input type="checkbox" class="styled section additional-section {{section['name']}} camera-config" id="{{section['name']}}Switch">{% endif %}
                    {% if section.get('description') %}<span class="help-mark" title="{{section['description']}}">?</span>{% endif %}
                    <a class="settings-section-title">{{section['label']}}</a>
                    <span class="minimize {% if section.get('open') %}open{% endif %}"></span>
                </div>
                <table class="settings">
                    {% for config in section['configs'] %}
                        {{config_item(config)}}
                    {% endfor %}
                </table>
                {% endif %}                    
                {% endfor %}

                <div class="settings-progress"></div>
            </div>
        </div>
        <img class="background-logo" src="{{static_path}}img/motioneye-logo.svg" onmousedown="return false;">
        <div class="page-container"></div>
        <div class="footer">
            <div class="copyright-note">copyleft Boris &amp; Vladimir Software - 2016<br>based on <a href="https://github.com/ccrisan/motioneyeos">MotionEyeOS</a> from Calin Crisan</div>
        </div> 
    </div>
    {% else %}
        <div class="camera-frame" id="camera{{camera_id}}"
                streaming_framerate="{{camera_config['stream_maxrate']}}" streaming_server_resize="{{camera_config['@webcam_server_resize']|string|lower}}"
                proto="{{camera_config['@proto']}}" url="{{camera_config['@url']}}">
            
            <div class="camera-container">
                <div class="camera-placeholder"><img class="no-camera" src="{{static_path}}img/no-camera.svg"></div><img
                    class="camera"><div class="camera-progress"><img class="camera-progress"></div>
            </div>
        </div>
    {% endif %}
    <div class="modal-glass"></div>
    <div class="modal-container"></div>
    <div class="popup-message-container"></div>
{% endblock %}
